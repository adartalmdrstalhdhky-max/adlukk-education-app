import 'package:flutter/material.dart';
import '../../../../core/entities/course_entity.dart';
import '../../../../core/services/hive_service.dart';

class CourseProvider extends ChangeNotifier {
  final HiveService hiveService;
  
  CourseProvider({required this.hiveService});

  // ğŸ“ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶Ù‡Ø§
  List<CourseEntity> _courses = [];
  List<CourseEntity> get courses => _courses;

  // ğŸ”„ Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Hive
  void loadCourses() {
    _courses = hiveService.coursesBox.values.toList();
    notifyListeners();
  }

  // â• Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ ÙƒÙˆØ±Ø³ Ø¬Ø¯ÙŠØ¯
  Future<void> addCourse(CourseEntity course) async {
    await hiveService.coursesBox.put(course.id, course);
    loadCourses(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
  }

  // ğŸ—‘ï¸ Ø¯Ø§Ù„Ø© Ù„Ø­Ø°Ù ÙƒÙˆØ±Ø³
  Future<void> deleteCourse(String id) async {
    await hiveService.coursesBox.delete(id);
    loadCourses(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù
  }
}
